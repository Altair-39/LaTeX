\chapter{Introduzione}


Le \textcolor{blue}{basi di dati} sono un insieme di \textcolor{blue}{dati} utilizzati per il supporto allo svolgimento di attività.

Per esempio, in ambito universitario, bisogna tenere memorizzate grandi quantità di dati relativi a ogni studente. Per fare ciò non si possono usare array, alberi, liste, etc. perchè la memoria principale non può gestire velocemente tanti dati.

All'interno delle basi di dati i dati sono \textcolor{blue}{integri, flessibili} e con una \textcolor{blue}{ridondanza controllata}, ma hanno costantemente bisogno di \textcolor{blue}{manutenzione}.


\label{Sistemi informativi}

I \textcolor{blue}{sistemi informativi} gestiscono le informazioni di interesse. Ogni organizzazione ha un sistema informativo, esplicito o meno ed è indipendente dall'automazione (es. I banchieri fiorentini nel '500). Esso si occupa di:
\begin{itemize}
	\item raccolta e acquisizione dei dati;
	\item archiviazione e conservazione;
	\item elaborazione, trasformazione e produzione;
	\item distribuzione, comunicazione e scambio.
\end{itemize}

Un \textcolor{blue}{dato} è qualcosa di immediatamente percepibile, mentre un'\textcolor{blue}{informazione} è costituita da dati uniti tramite delle interpretazioni.

\section{DBMS}

Le basi di dati devono essere gestite da un \textcolor{blue}{DBMS}\footnote{\textit{Database management system}} che è esterno alle applicazioni. Alcuni esempi sono MySQL\footnote{Inizialmente libero, ma poi acquisito da Oracle}, MariaDB\footnote{Versione opensource di MySQL} e PostgreSQL. I DBMS sono persistenti poichè la loro vita è indipendente dalle applicazioni che li utilizzano, sono condivisibili in modo da ridurre eventuali ridondanze (informazioni ripetute) e incoerenze (allineamento scorretto dei dati). Tuttavia la condivisibilità delle basi di dati produce concorrenza (accesso contemporaneo a stessi dati) che deve essere regolamentata al fine di salvaguardare l'integrità. I DBMS garantiscono anche la privatezza mediante vari tipi di autorizzazione.

Inoltre sono affidabili, ovvero resistenti a malfunzionamenti, tramite la \textcolor{blue}{gestione delle transazioni}. Una transazione\footnote{vedi \ref{Transazioni}} è un'operazione atomica (indivisibile) i cui risultati sono permanenti. Se si verifica un errore \textit{durante} lo svolgimento di una transazione i risultati vengono anullati.

\subsection{Modello di dati}

Un \textcolor{blue}{modello di dati} serve a organizzare e descrivere i dati. In ogni base di dati esistono:
\begin{itemize}
	\item schema: descrive la struttura;
	\item istanza: i valori effettivi in un determinato istante.
\end{itemize}

Un \textcolor{blue}{modello concettuale} serve per progettare una base di dati a un livello astratto. Di solito si usa il modello \textcolor{blue}{\textit{entity-relationship (ER)}}\footnote{\textit{Modello entità-associazione}}.

I \textcolor{blue}{modelli logici} sono utilizzati dai programmi. In questo corso useremo il modello \textcolor{blue}{\textit{relazionale}}.
Per rappresentare il modello logico si usano:
\begin{itemize}
	\item schema logico: la descrizione base di dati nel modello logico;
	\item schema esterno: descrizione di parte della base di dati in un modello logico;
	\item schema interno (o fisico): rappresenta lo schema logico tramite strutture di memorizzazione (es. record di puntatori).
\end{itemize}

Il livello logico è indipendente da quello fisico. In questo corso si vedrà solo il livello logico.

L'accesso ai dati avviene solo tramite il livello esterno (che può coincidere con quello logico), generando due forme di indipendenza:
\begin{itemize}
	\item logica: Il livello esterno è indipendente da quello logico;
	\item fisica: Il livello logico e quello esterno sono indipendenti da quello fisico.
\end{itemize}

\subsection{Linguaggi per basi di dati}

Si hanno diversi linguaggi:
\begin{itemize}
	\item \textcolor{blue}{interfacce grafiche}: senza un linguaggio testuale;
	\item \textcolor{blue}{SQL}: linguaggio testuale interattivo;
	\item \textcolor{blue}{comandi SQL}: si possono usare in vari linguaggi;
	\item \textcolor{blue}{SQL in linguaggi ad hoc}: linguaggi propri di un DBMS.
\end{itemize}

Oltre a questo i linguaggi si dividono in due macrocategorie:
\begin{itemize}
	\item \textcolor{blue}{DML}\footnote{\textit{Data manipulation language}}: servono per interrogare e aggiornare le istanze del DBMS;
	\item \textcolor{blue}{DDL}\footnote{\textit{Data definition language}}: definiscono schemi ed eseguono operazioni generali.
\end{itemize}

\subsection{Persone che interagiscono con un DBMS}

Breve elenco di alcune categorie che interagiscono con i DBMS:

\begin{itemize}
	\item Progettisti e realizzatori di DBMS;
	\item DBA\footnote{Amministratori della base di dati};
	\item Progettisti della base di dati;
	\item Progettisti e programmatori di applicazioni;
	\item Utenti finali: categoria di utenti che eseguono transazioni;
	\item Utenti casuali: categoria di utenti che eseguono operazioni diverse da transazioni.
\end{itemize}

\section{Modelli Logici}


Ci sono principalmente tre tipi di modelli logici tradizionali: gerarchici, reticolari e relazionali. I modelli gerarchici e reticolari utilizzano puntatori tra record. Il modello relazionale (l'unico che vedremo in questo corso) è basato su valori.

\subsection{Il modello relazionale}

Il \textcolor{blue}{modello relazionale} fu proposto da E. F. Codd nel 1970, ma divento disponibile nei DBMS commerciali solamente nel 1981. Esso si basa sul concetto di relazione. Ci sono tre possibili accezioni di relazione: quella matematica, quella del modello relazionale e quella del modello ER (spesso tradotta come \textit{associazione}). Nelle relazioni matematiche la struttura è posizionale\footnote{I ruoli di ogni dominio sono distinti dalla posizione}, mentre la relazione del modello relazionale usa una struttura non posizionale.

A ogni dominio viene associato un nome univoco chiamato \textcolor{blue}{attributo}. Inoltre le sequenze di n elementi sono chiamate \textcolor{blue}{tuple}.
In una tabella che rappresenta una relazione l'ordine delle righe e delle colonne è irrilevante. Una tabella rappresenta una relazione se:
\begin{itemize}
	\item le righe sono diverse tra di loro;
	\item le intestazioni delle colonne sono diverse tra di loro;
	\item ogni colonna ha valori omogenei (sempre dello stesso tipo).
\end{itemize}

I riferimenti tra i dati in relazioni diverse sono rappresentati con i valori dei domini delle tuple.

\subsection{Strutture basate su valori}

Una \textcolor{blue}{struttura basata su valori} è indipendente dalle strutture fisiche e rappresenta solo ciò che è rilevante dal punto di vista dell'applicazione. I dati sono facilmente \textcolor{blue}{portabili} da un sitema a un altro.

Definizioni importanti:
\begin{itemize}
	\item \textcolor{blue}{Schema di relazione}: un nome R con un insieme di attributi $A_1,...,A_n \rightarrow R(A_1,...,A_n)$. Es. Studenti(matricola, nome, cognome);
	\item \textcolor{blue}{Schema di base di dati}: insieme degli schemi di relazione

	      R = $\{R_1(X_1),...,R_k(X_k)\}$.

	      Es.\{Studenti(matricola, nome, cognome), Esami(studente, voto, corso), Corsi(codice, titolo, docente)\};
	\item \textcolor{blue}{Tupla}: su un insieme di attributi ($A_1,...,A_n$) associa a ciascun attributo $A_i$ un valore del dominio di $A_i$. t[$A_i$] è il valore della tupla t sull'attributo $A_i$. Es. Esami(studente, voto, corso), t=('3456',30,'04'), t[voto] = 30;
	\item \textcolor{blue}{Istanza di relazione}: su uno schema di relazione R(X) dove X sono attributi è l'insieme r di tuple su X;
	\item \textcolor{blue}{Istanza di base di dati}: su uno schema di base di dati \{$R_1(X_1), ..., R_h(X_h)$\} è l'insieme di relazioni \{$r_1,..,r_h$\}.
\end{itemize}

Le tuple costringono a usare determinati formati, ma in alcuni casi i valori potrebbero non essere disponibili. Es. Non tutti hanno un secondo nome. In questo caso si introduce un valore extra: il \textcolor{blue}{valore nullo} (NULL).

\paragraph{Tipi di valore nullo}

\label{Valori nulli}

Ci sono vari casi di valore nullo, ma i DBMS non fanno distinzioni:
\begin{itemize}
	\item valore sconosciuto: il valore esiste, ma non è noto. Es. il numero di telefono;
	\item valore inesistente: il valore non esiste. Es. permesso di soggiorno;
	\item valore senza informazione: il valore può essere sconosciuto o inesistente. Es. numero passaporto.
\end{itemize}

\subsection{Strutture nidificate}

Le \textcolor{blue}{strutture nidificate } sono strutture che contengono altre strutture. Nei modelli relazionali i valori devono essere semplici e non relazioni, per cui non sono ammesse (\textit{prima forma normale}). Per rappresentare strutture nidificate si usano più tabelle per cui si possono rappresentare informazioni più precise.

\subsection{Vincoli}
\label{Vincoli}
Un \textcolor{blue}{vincolo} è un predicato logico che associa a ogni istanza un valore di verità.

\paragraph{Vincoli di integrità}

I \textcolor{blue}{vincoli di integrità} servono a garantire la correttezza dei dati. Se, dopo una modifica, il vincolo non risulta vero il DBMS rifiuta il cambiamento. Alcuni tipi di vincoli sono:
\begin{itemize}
	\item \textcolor{blue}{intrarelazionali}: che riguardano una sola relazione;
	\item \textcolor{blue}{interrelazionali}: che riguardano più relazioni.
\end{itemize}

I \textcolor{blue}{vincoli di tupla} sono intrarelazionali ed esprimono condizioni sul valore di ciascuna tupla. Es. voto $\geq$ 18 AND voto $\leq$ 30.

\paragraph{Vincoli di integrità referenziale}

I vincoli di integrità referenziale sono detti anche \textcolor{blue}{vincoli di foreign key} e servono per garantire la correttezza dei riferimenti tra tabelle. Questi vincoli hanno sempre un verso (es. X[tabella1] referenzia X[tabella2]). Se ci sono valori nulli i vincoli possono essere resi meno restrittivi modificando la base di dati. Alcune modifiche delle istanze possono essere gestite in questi modi:
\begin{itemize}
	\item eliminazione a cascata: se viene eliminata una tupla referenziata si eliminano anche le tuple che la referenziano;
	\item introduzione di valori nulli: se viene eliminata una tupla referenziata si settano a NULL tutti i valori che la referenziano.
\end{itemize}

\paragraph{Vincoli di chiave}

\label{Vincoli di chiave}

Una \textcolor{blue}{superchiave} è un insieme di attributi usati per identificare univocamente le tuple di una relazione. L'insieme di tutti gli attributi è sempre una superchiave. Una superchiave \textcolor{blue}{minimale} k è una superchiave a cui non è possibile rimuovere nessun attributo, altrimenti non sarebbe più una superchiave. k è una \textcolor{blue}{chiave (candidata)} se e solo se è una superchiave minimale. Tutte le chiavi sono superchiavi. Una \textcolor{blue}{chiave primaria} è una particolare chiave scelta come modo preferito per identificare le tuple. Ogni relazione ha una e una sola chiave primaria, ma può avere più superchiavi.

L'esistenza delle chiavi permette di accedere a ciascun dato. In presenza di valori nulli\footnote{vedi \ref{Valori nulli}} i valori della chiave non permettono di identificare le tuple. La chiave primaria non può assumere valori nulli.
