\chapter{Contratti}
\paragraph{Pre-condizione generale:} L'attore è identificato con un'istanza \textit{org} di Organizzatore.

\section{Passo 1}
\section*{1. aggiungiTurnoCucina(\underline{data}: numero, \underline{giorno}: testo, \underline{settimana}: numero, \underline{orarioInizio}: numero, \underline{orarioFine}: numero, \underline{luogo?}: Testo):}

\paragraph{Pre-condizioni:} 


\paragraph{Post-condizioni:} Se \underline{\textit{turno}} è \textbf{gestito da} \textit{org} e non esiste un altro turno con \underline{data} == \underline{\textit{turno}.data}, \underline{orarioInizio} $>=$ \underline{\textit{turno.orario}.orarioInizio} e \underline{orarioFine} $<=$ \underline{\textit{turno.orario}.orarioFine}

\begin{itemize}
    \item è stata creata un'istanza $tc$ di TurnoCucina;
    \item è stata creata un'istanza $o$ di Orario;
    \item è stata creata un'associazione \textbf{ha} \underline{\textit{turnoCucina}} e $o$;
    \item è stata creata un'associazione \textbf{contiene} \underline{\textit{turnoCucina}} e \textit{TabelloneTurniCucina};
    \item \underline{\textit{turno}.data} = \underline{\textit{data}};
    \item \underline{\textit{turno}.giorno} = \underline{\textit{giorno}};
    \item \underline{\textit{turno}.settimana} = \underline{\textit{settimana}};
    \item $[$ se \underline{\textit{luogo}} è specificato $]$ \underline{\textit{turno}.luogo} = \underline{\textit{luogo}};
    \item \underline{\textit{turno}.concluso}  = no;
    \item \underline{\textit{o}.inizio}  = \underline{\textit{orarioInizio}};
    \item \underline{\textit{o}.fine}  = \underline{\textit{orarioFine}}.
    
\end{itemize}

\section*{1a.1 modificaTurnoCucina(\underline{turno}: TurnoCucina, \underline{orarioInizio?}: numero, \underline{orarioFine?}: numero, \underline{luogo?}: Testo):}

\paragraph{Pre-condizioni:}

\begin{itemize}
 \item TabelloneTurniCucina $ttc$ \textbf{contiene} \underline{turno};
 \item $[$ se \underline{\textit{orarioInizio}} o \underline{\textit{orarioFine}} è specificato $]$ non esiste un $tc$ tale che $tc$.orario.inizio $>$ \underline{\textit{orario}} e $tc$.orario.fine $<$ \underline{\textit{orario}}.
\end{itemize}

\paragraph{Post-condizioni:} Se \underline{\textit{turno}} è \textbf{gestito da} \textit{org}:

\begin{itemize}
    \item $[$ se \underline{\textit{orarioInizio}} è specificato $]$ \underline{\textit{turno}.orario.inizio} = \underline{\textit{orarioInizio}};

    \item $[$ se \underline{\textit{orarioFine}} è specificato $]$ \underline{\textit{turno}.orario.fine} = \underline{\textit{orarioFine}};

    \item $[$ se \underline{\textit{luogo}} è specificato $]$ \underline{\textit{turno}.luogo} = \underline{\textit{luogo}}.

\end{itemize}

\section*{1b.1 cancellaTurnoCucina(\underline{turno}: TurnoCucina):}

\paragraph{Pre-condizioni:}

\begin{itemize}
  \item TabelloneTurniCucina $ttc$ \textbf{contiene} \underline{turno}.
\end{itemize}

\paragraph{Post-condizioni:} Se \underline{\textit{turno}} è \textbf{gestito da} {\textit{org}}

\begin{itemize}
   \item \textlangle $ $ per ogni Compito $c$ \textbf{presente in} \underline{turno} \textrangle:
    \begin{itemize}
        \item l'associazione \textbf{svolto in} tra $c$ e \underline{turno} è stata eliminata.
    \end{itemize}
    \item l'associazione \textbf{contiene} tra $tc$ e $ttc$ è stata eliminata;
    \item l'associazione \textbf{gestito da} tra $tc$ e \textit{org} è stata eliminata;
\item l'associazione \textbf{si svolge in} tra $tc$ e \textit{Evento} è stata eliminata;
    \item l'associazione \textbf{ha} tra $tc$ e $o$ è stata eliminata;
    \item l'istanza $o$ di Orario cessa di esistere;
    \item l'istanza $tc$ di TurnoCucina cessa di esistere.
\end{itemize}

\section*{1c.1 modificaTuttiTurniCucina(\underline{giorno?}: Testo, \underline{settimana?}: numero, \underline{orarioInizio?}: numero, \underline{orarioFine?}: numero, \underline{luogo?}: Testo):}

\paragraph{Pre-condizioni:}

\paragraph{Post-condizioni:} Se \underline{\textit{turno}} è \textbf{gestito da} {\textit{org}}
 \begin{itemize}
   \item $[$ se \underline{\textit{giorno}} e \underline{\textit{settimana}} sono specificati $]$ \textlangle per ogni TurnoCucina $tc$ presente in $ttc$ con $tc$.data.giorno == \underline{\textit{giorno}} e $tc$.data.settimana == \underline{\textit{settimana}} \textrangle:
\begin{itemize}
  \item $[$ se \underline{\textit{orarioInizio}} è specificato $]$ \underline{\textit{turno}.orario.inizio} = \underline{\textit{orarioInizio}};
    \item $[$ se \underline{\textit{orarioFine}} è specificato $]$ \underline{\textit{turno}.orario.fine} = \underline{\textit{orarioFine}};
  \item $[$ se \underline{\textit{luogo}} è specificato $]$ $tc$.luogo = \underline{\textit{luogo}}.
\end{itemize}
   \item $[$ se \underline{\textit{giorno}} è specificato $]$ \textlangle per ogni TurnoCucina $tc$ presente in $ttc$ con $tc$.data.giorno == \underline{\textit{giorno}} \textrangle:
\begin{itemize}
  \item $[$ se \underline{\textit{orarioInizio}} è specificato $]$ \underline{\textit{turno}.orario.inizio} = \underline{\textit{orarioInizio}};
    \item $[$ se \underline{\textit{orarioFine}} è specificato $]$ \underline{\textit{turno}.orario.fine} = \underline{\textit{orarioFine}};
  \item $[$ se \underline{\textit{luogo}} è specificato $]$ $tc$.luogo = \underline{\textit{luogo}}.
\end{itemize}
   \item $[$ se \underline{\textit{settimana}} è specificato $]$ \textlangle per ogni TurnoCucina $tc$ presente in $ttc$ con $tc$.data.settimana == \underline{\textit{settimana}} \textrangle:
\begin{itemize}
  \item $[$ se \underline{\textit{orarioInizio}} è specificato $]$ \underline{\textit{turno}.orario.inizio} = \underline{\textit{orarioInizio}};
    \item $[$ se \underline{\textit{orarioFine}} è specificato $]$ \underline{\textit{turno}.orario.fine} = \underline{\textit{orarioFine}};
  \item $[$ se \underline{\textit{luogo}} è specificato $]$ $tc$.luogo = \underline{\textit{luogo}}.
\end{itemize}

\end{itemize}

\section*{1d.1 eliminaTuttiTurniCucina(\underline{giorno}: Testo, \underline{settimana}: Testo):}

\paragraph{Pre-condizioni:}

\paragraph{Post-condizioni:} 
\begin{itemize}
   \item $[$ se \underline{\textit{giorno}} e \underline{\textit{settimana}} sono specificati $]$ \textlangle per ogni TurnoCucina $tc$ presente in $ttc$ con $tc$.data.giorno == \underline{\textit{giorno}} e $tc$.data.settimana == \underline{\textit{settimana}} \textrangle:
\begin{itemize}
   \item \textlangle $ $ per ogni Compito $c$ \textbf{presente in} $t$ \textrangle:
    \begin{itemize}
        \item l'associazione tra $c$ e $tc$ è stata eliminata.
        \end{itemize}
    \item l'associazione \textbf{contiene} tra $tc$ e $ttc$ è stata eliminata;
    \item l'associazione \textbf{gestito da} tra $tc$ e \textit{org} è stata eliminata;
\item l'associazione \textbf{si svolge in} tra $tc$ e \textit{Evento} è stata eliminata;
  \item l'associazione \textbf{ha} tra $tc$ e $o$ è stata eliminata;
    \item l'istanza $o$ di Orario cessa di esistere;
    \item l'istanza $tc$ di TurnoCucina cessa di esistere.
\end{itemize}
   \item $[$ se \underline{\textit{giorno}} è specificato $]$ \textlangle per ogni TurnoCucina $tc$ presente in $ttc$ con $tc$.data.giorno == \underline{\textit{giorno}} \textrangle:
\begin{itemize}
   \item \textlangle $ $ per ogni Compito $c$ \textbf{presente in} $t$ \textrangle:
    \begin{itemize}
        \item l'associazione tra $c$ e $tc$ è stata eliminata.
    \end{itemize}
    \item l'associazione \textbf{contiene} tra $tc$ e $ttc$ è stata eliminata;
    \item l'associazione \textbf{gestito da} tra $tc$ e \textit{org} è stata eliminata;
\item l'associazione \textbf{si svolge in} tra $tc$ e \textit{Evento} è stata eliminata;
    \item l'associazione \textbf{ha} tra $tc$ e $o$ è stata eliminata;
    \item l'istanza $o$ di Orario cessa di esistere;
    \item l'istanza $tc$ di TurnoCucina cessa di esistere.
\end{itemize}

   \item $[$ se \underline{\textit{settimana}} è specificata $]$ \textlangle per ogni TurnoCucina $tc$ presente in $ttc$ con $tc$.data.settimana == \underline{\textit{settimana}} \textrangle:
\begin{itemize}
   \item \textlangle $ $ per ogni Compito $c$ \textbf{presente in} $t$ \textrangle:
    \begin{itemize}
        \item l'associazione tra $c$ e $tc$ è stata eliminata.
        \end{itemize}
    \item l'associazione \textbf{contiene} tra $tc$ e $ttc$ è stata eliminata;
    \item l'associazione \textbf{gestito da} tra $tc$ e \textit{org} è stata eliminata;
\item l'associazione \textbf{si svolge in} tra $tc$ e \textit{Evento} è stata eliminata;
    \item l'associazione \textbf{ha} tra $tc$ e $o$ è stata eliminata;
    \item l'istanza $o$ di Orario cessa di esistere;
    \item l'istanza $tc$ di TurnoCucina cessa di esistere.
\end{itemize}

\end{itemize}

\section{Passo 2}
\section*{2. consultaEventi():}

\paragraph{Pre-condizioni:}

\paragraph{Post-condizioni:}

\nt{consultaEventi() è un’interrogazione di sistema quindi non ha pre e post condizioni.}

\section{Passo 3}
\section*{3. selezionaEvento(\underline{evento}: Evento):}

\paragraph{Pre-condizioni:}
\begin{itemize}
     \item \underline{\textit{evento}} è \textbf{organizzato da} {\textit{org}}.
\end{itemize}

\paragraph{Post-condizioni:}

\section{Passo 4}
\section*{4. aggiungiTurnoServizio(\underline{data}: numero, \underline{orarioInizio}: numero, \underline{orarioFine}: numero):}

\paragraph{Pre-condizioni:}
\begin{itemize}
    \item è in corso la modifica di $tts$ \underline{TabelloneTurniServizio};
    \item è in corso la definizione dei turni di servizio in $e$ \underline{Evento} e \underline{\textit{servizio}} \textbf{è previsto} da $e$.
\end{itemize}

\paragraph{Post-condizioni:}
\begin{itemize}
   \item è stata creata un'istanza $ts$ di TurnoServizio;
   \item è stata creata un'istanza $o$ di Orario;
   \item è stata creata un'associazione \textbf{ha} \underline{\textit{turnoServizio}} e $o$;
    \item è stata creata un'associazione \textbf{contiene} tra \underline{\textit{turnoServizio}} e \underline{\textit{TabelloneTurniServizio}};
   \item \underline{\textit{turnoServizio}.data} = \underline{\textit{data}};
    \item \underline{\textit{o}.inizio}  = \underline{\textit{orarioInizio}};
    \item \underline{\textit{o}.fine}  = \underline{\textit{orarioFine}}.
    \item \underline{\textit{turnoServizio}.concluso}  = no.
\end{itemize}


\section{Passo 5}
\section*{5. aggiungiScadenza(\underline{turnoServizio}: TurnoServizio, \underline{scadenza}: Testo):}

\paragraph{Pre-condizioni:}
\begin{itemize}
  \item $tts$ \textbf{contiene} \underline{turnoServizio};
     \item \underline{\textit{turnoServizio}} è \textbf{gestito da} {\textit{org}};
   \item \underline{\textit{turnoServizo}.concluso} = no.
\end{itemize}

\paragraph{Post-condizioni:}  
\begin{itemize}
 \item è stata creata un'istanza $s$ di Scadenza;
 \item \underline{\textit{s}.data} = \underline{\textit{scadenza}};
 \item è stata creata l'associazione \textbf{ha una} tra \underline{\textit{turnoServizio}} e $s$.
\end{itemize}

\section*{5a.1 rimuoviScadenza():}

\paragraph{Pre-condizioni:}
\begin{itemize}
\item è in corso la modifica di $ts$ \underline{TurnoServizio};
 \item $tts$ \textbf{contiene} \underline{turnoServizio};
     \item \underline{\textit{turnoServizo}} è \textbf{gestito da} {\textit{org}};
   \item \underline{\textit{turnoServizo}.concluso} = no.
\end{itemize}

\paragraph{Post-condizioni:} Se esiste l'associazione \textbf{ha una} tra \underline{\textit{turnoServizio}} e un'istanza $s$ di Scadenza:

\begin{itemize}
\item l'associazione \textbf{ha una} tra \underline{\textit{turnoServizio}} $s$ è stata eliminata;
 \item l'istanza $s$ di Scadenza cessa di esistere.
\end{itemize}

\section*{5b.1 modificaScadenza(\underline{turnoServizio}: TurnoServizio, \underline{scadenza}: Testo):}

\paragraph{Pre-condizioni:}
\begin{itemize}
\item è in corso la modifica di $tts$ \underline{TabelloneTurniServizio};
 \item $tts$ \textbf{contiene} \underline{turnoServizio};
 \item \underline{\textit{turnoServizo}} è \textbf{gestito da} {\textit{org}};
 \item \underline{\textit{turnoServizo}.concluso} = no.
\end{itemize}

\paragraph{Post-condizioni:}
\begin{itemize}
    \item \underline{\textit{s}.data} = \underline{\textit{scadenza}}.
\end{itemize}

\section{Passo 6}
\section*{6. modificaOrario(\underline{turnoServizio}: TurnoServizio, \underline{nuovoOrarioInizio?}: numero, \underline{nuovoOrarioFine?}: numero,):}

\paragraph{Pre-condizioni:}
\begin{itemize}
 \item è in corso la modifica di $tts$ \underline{TabelloneTurniServizio};
 \item $tts$ \textbf{contiene} \underline{turnoServizio};
   \item \underline{\textit{turnoServizo}} è \textbf{gestito da} {\textit{org}};
   \item \underline{\textit{turnoServizo}.concluso} = no.
\end{itemize}

\paragraph{Post-condizioni:}

\begin{itemize}
    \item $[$ se \underline{\textit{orarioInizio}} è specificato $]$ \underline{\textit{turnoServizio}.Orario.inizio} = \underline{\textit{orarioInizio}};
    \item $[$ se \underline{\textit{orarioFine}} è specificato $]$ \underline{\textit{turnoServizio}.Orario.fine} = \underline{\textit{orarioFine}};
\end{itemize}

\section*{6a.1 cancellaTurnoServizio(\underline{turnoServizio}: TurnoServizio):}

\paragraph{Pre-condizioni:}
\begin{itemize}
 \item è in corso la modifica di $tts$ \underline{TabelloneTurniServizio};
 \item $tts$ \textbf{contiene} \underline{turnoServizio};
   \item \underline{\textit{turnoServizo}} è \textbf{gestito da} {\textit{org}};
   \item \underline{\textit{turnoServizo}.concluso} = no.
\end{itemize}

\paragraph{Post-condizioni:} 
\begin{itemize}
    \item $[$ se esiste l'associazione \textbf{ha una} tra \underline{\textit{turnoServizio}} e un'istanza $s$ di Scadenza $]$:
    \begin{itemize}
    \item questa è stata eliminata;
    \item l'istanza $s$ di Scadenza cessa di esistere.
    \end{itemize}
  \item l'associazione \textbf{contiene} tra $ts$ e $tts$ è stata eliminata;
 \item l'associazione \textbf{gestito da} tra $ts$ e \textit{org} è stata eliminata;
\item l'associazione \textbf{si svolge in} tra $ts$ e \textit{Evento} è stata eliminata;
 \item l'associazione \textbf{ha} tra $ts$ e $o$ è stata eliminata;
    \item l'istanza $o$ di Orario cessa di esistere;
    \item l'istanza $tc$ di TurnoServizio cessa di esistere.

 
\end{itemize}
