\chapter{Contratti}
\paragraph{Pre-condizione generale:} L'attore è identificato con un'istanza \textit{org} di Organizzatore.

\section{Passo 1}
\section*{1. aggiungiTurnoCucina(\underline{turno}: TurnoCucina, \underline{data}: Numero, \underline{orario}: Numero, \underline{luogo?}: Testo):}

\paragraph{Pre-condizioni:} 
\begin{itemize}
    \item è in corso la modifica di $tt$ \underline{TabelloneDeiTurni}.
\end{itemize}

\paragraph{Post-condizioni:} Se \underline{\textit{turno}} è \textbf{gestito da} \textit{org} e non esiste un altro turno con \underline{data} == \underline{\textit{turno}.data} 

\begin{itemize}
    \item è stata creata un'istanza $tc$ di TurnoCucina;
    \item $tc$ è \textbf{contenuto in} $tt$;
    \item è stata creata un'associazione \textbf{si svolge in} tra \underline{\textit{turnoCucina}} e \textit{Evento};
    \item \underline{\textit{turno}.data} = \underline{\textit{data}};
    \item \underline{\textit{turno}.orario} = \underline{\textit{orario}};
    \item $[$ se \underline{\textit{luogo}} è specificato $]$ \underline{\textit{turno}.luogo} = \underline{\textit{luogo}};
    \item \textit{turno}.concluso  = no.
\end{itemize}

\section*{1a.1 modificaTurnoCucina(\underline{turno}: TurnoCucina, \underline{data?}: Numero, \underline{orario?}: Numero, \underline{luogo?}: Testo):}

\paragraph{Pre-condizioni:}

\begin{itemize}
 \item è in corso la modifica di $tt$ \underline{TabelloneDeiTurni};
 \item $tt$ \textbf{contiene} \underline{turno};
 \item $[$ se \underline{\textit{orario}} è specificato $]$ non esiste un $tc$ con lo stesso \underline{\textit{orario}}.
\end{itemize}

\paragraph{Post-condizioni:} Se \underline{\textit{turno}} è \textbf{gestito da} \textit{org}:

\begin{itemize}
    \item $[$ se \underline{\textit{data}} è specificato $]$ \underline{\textit{turno}.data} = \underline{\textit{data}};

    \item $[$ se \underline{\textit{orario}} è specificato $]$ \underline{\textit{turno}.orario} = \underline{\textit{orario}};

    \item $[$ se \underline{\textit{luogo}} è specificato $]$ \underline{\textit{turno}.luogo} = \underline{\textit{luogo}}.

\end{itemize}

\section*{1b.1 cancellaTurnoCucina(\underline{turno}: TurnoCucina):}

\paragraph{Pre-condizioni:}

\begin{itemize}
 \item è in corso la modifica di $tt$ \underline{TabelloneDeiTurni};
 \item $tt$ \textbf{contiene} \underline{turno}.
\end{itemize}

\paragraph{Post-condizioni:} Se \underline{\textit{turno}} è \textbf{gestito da} {\textit{org}}

\begin{itemize}
   \item \textlangle $ $ per ogni Compito $c$ \textbf{presente in} \underline{turno} \textrangle:
    \begin{itemize}
        \item l'associazione \textbf{svolto in} tra $c$ e \underline{turno} è stata eliminata.
    \end{itemize}
    \item l'associazione \textbf{contiene} tra \underline{\textit{turno}} e $tt$ è stata eliminata;
    \item l'istanza $tc$ di TurnoCucina cessa di esistere.
\end{itemize}

\section*{1c.1 modificaTuttiTurniCucina(\underline{data}: Numero, \underline{orario?}: Numero, \underline{luogo?}: Testo):}

\paragraph{Pre-condizioni:}

\begin{itemize}
 \item è in corso la modifica di $tt$ \underline{TabelloneDeiTurni};
 \item $tt$ \textbf{contiene} \underline{turno};
 \item \underline{\textit{turno}.data} == \underline{data}.
\end{itemize}

\paragraph{Post-condizioni:} Se \underline{\textit{turno}} è \textbf{gestito da} {\textit{org}}

 \begin{itemize}
     \item $[$ se \underline{\textit{data}} è specificato $]$ \underline{\textit{turno}.data} = \underline{\textit{data}};

    \item $[$ se \underline{\textit{orario}} è specificato $]$ \underline{\textit{turno}.orario} = \underline{\textit{orario}};

    \item $[$ se \underline{\textit{luogo}} è specificato $]$ \underline{\textit{turno}.luogo} = \underline{\textit{luogo}}.

\end{itemize}

\section*{1d.1 eliminaTuttiTurniCucina(\underline{data}: Numero):}

\paragraph{Pre-condizioni:}
\begin{itemize}
 \item è in corso la modifica di $tt$ \underline{TabelloneDeiTurni};
 \item $tt$ \textbf{contiene} \underline{turno};
 \item \underline{\textit{turno}.data} == \underline{data}.
\end{itemize}

\paragraph{Post-condizioni:} Se \underline{\textit{turno}} è \textbf{gestito da} {\textit{org}}

\begin{itemize}
   \item \textlangle $ $ per ogni Compito $c$ \textbf{presente in} \underline{turno} \textrangle:
    \begin{itemize}
        \item l'associazione tra $c$ e \underline{turno} è stata eliminata.
    \end{itemize}
    \item l'associazione \textbf{contiene} tra \underline{\textit{turno}} e $tt$ è stata eliminata;
    \item l'associazione \textbf{gestito da} tra \underline{\textit{turnoServizio}} e \textit{org} è stata eliminata;
\item l'associazione \textbf{si svolge in} tra \underline{\textit{turnoCucina}} e \textit{Evento} è stata eliminata;
    \item l'istanza $tc$ di TurnoCucina cessa di esistere.
\end{itemize}

\section{Passo 2}
\section*{2. consultaEventi():}

\paragraph{Pre-condizioni:}

\paragraph{Post-condizioni:}

\nt{consultaEventi() è un’interrogazione di sistema quindi non ha pre e post condizioni.}

\section{Passo 3}
\section*{3. selezionaEvento(\underline{evento}: Evento):}

\paragraph{Pre-condizioni:}
\begin{itemize}
     \item \underline{\textit{evento}} è \textbf{organizzato da} {\textit{org}}.
\end{itemize}

\paragraph{Post-condizioni:}


\section{Passo 4}
\section*{4. aggiungiTurnoServizio(\underline{turnoServizio}: TurnoServizio, \underline{orario}: Numero):}

\paragraph{Pre-condizioni:}

\paragraph{Post-condizioni:}
\begin{itemize}
    \item è stata creata un'istanza $ts$ di TurnoServizio;
   \item è stata creata un'associazione \textbf{si svolge in} tra \underline{\textit{turnoServizio}} e \textit{Evento};
    \item \underline{\textit{turnoServizio}.orario} = \underline{\textit{orario}};
    \item \textit{turnoServizio}.concluso  = no.
\end{itemize}


\section{Passo 5}
\section*{5. aggiungiScadenza(\underline{turnoServizio}: TurnoServizio, \underline{scadenza}: Numero):}

\paragraph{Pre-condizioni:}
\begin{itemize}
     \item \underline{\textit{turnoServizio}} è \textbf{gestito da} {\textit{org}};
   \item \underline{\textit{turnoServizo}.concluso} = no.
\end{itemize}

\paragraph{Post-condizioni:}  
\begin{itemize}
 \item è stata creata un'istanza $s$ di Scadenza;
 \item \underline{\textit{s}.data} = \underline{\textit{scadeza}};
 \item è stata creata l'associazione \textbf{ha una} tra \underline{\textit{turnoServizio}} e $s$.
\end{itemize}

\section*{5a.1 rimuoviScadenza(\underline{turnoServizio}: TurnoServizio):}

\paragraph{Pre-condizioni:}
\begin{itemize}
     \item \underline{\textit{turnoServizo}} è \textbf{gestito da} {\textit{org}};
   \item \underline{\textit{turnoServizo}.concluso} = no.
\end{itemize}

\paragraph{Post-condizioni:} Se esiste l'associazione \textbf{ha una} tra \underline{\textit{turnoServizio}} e un'istanza $s$ di Scadenza e \underline{\textit{s}.data} != 0

\begin{itemize}
    \item \underline{\textit{s}.data} = \underline{0}.
\end{itemize}

\section*{5b.1 modificaScadenza(\underline{turnoServizio}: TurnoServizio, \underline{scadenza}: Numero):}

\paragraph{Pre-condizioni:}
\begin{itemize}
     \item \underline{\textit{turnoServizo}} è \textbf{gestito da} {\textit{org}};
   \item \underline{\textit{turnoServizo}.concluso} = no.
\end{itemize}

\paragraph{Post-condizioni:}
\begin{itemize}
    \item \underline{\textit{s}.data} = \underline{\textit{scadenza}}.
\end{itemize}

\section{Passo 6}
\section*{6. modificaOrario(\underline{turnoServizio}: TurnoServizio, \underline{nuovoOrario}: Numero):}

\paragraph{Pre-condizioni:}
\begin{itemize}
   \item \underline{\textit{turnoServizo}} è \textbf{gestito da} {\textit{org}};
   \item \underline{\textit{turnoServizo}.concluso} = no.
\end{itemize}

\paragraph{Post-condizioni:}

\begin{itemize}
    \item \underline{\textit{turnoServizio}.orario} = \underline{\textit{nuovoOrario}}.
\end{itemize}

\section*{6a.1 cancellaTurnoServizio(\underline{turnoServizio}: TurnoServizio):}

\paragraph{Pre-condizioni:}
\begin{itemize}
   \item \underline{\textit{turnoServizo}} è \textbf{gestito da} {\textit{org}};
   \item \underline{\textit{turnoServizo}.concluso} = no.
\end{itemize}

\paragraph{Post-condizioni:} 
\begin{itemize}
    \item $[$ se esiste l'associazione \textbf{ha una} tra \underline{\textit{turnoServizio}} e un'istanza $s$ di Scadenza $]$ questa è stata eliminata;
 \item l'istanza $s$ di Scadenza cessa di esistere;
 \item l'associazione \textbf{gestito da} tra \underline{\textit{turnoServizio}} e \textit{org} è stata eliminata;
\item l'associazione \textbf{si svolge in} tra \underline{\textit{turnoServizio}} e \textit{Evento} è stata eliminata;
 \item l'istanza $ts$ di TurnoServizio cessa di esistere.
\end{itemize}
