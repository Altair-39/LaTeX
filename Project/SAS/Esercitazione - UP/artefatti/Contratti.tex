\chapter{Contratti}

\paragraph{Pre-condizione generale:} L'attore è identificato con un'istanza \textit{ch} di Chef. 

\section{Passo 1}

\section*{1. generaFoglioRiepilogativo(\underline{evento}: Evento, \underline{servizio}: Servizio):}

\paragraph{Pre-condizioni:}

\begin{itemize}
  \item \underline{\textit{evento}} \textbf{prevede} \underline{\textit{servizio}};
  \item \underline{\textit{evento}} è \textbf{assegnato a} \underline{\textit{ch}};
  \item il Menù $m$ è \textbf{in uso in} \underline{\textit{servizio}}.
\end{itemize}

\paragraph{Post-condizioni:}

\begin{itemize}
    \item è stata creata un'istanza $f$ di FoglioRiepilogativo;
    \item $f$ è \textbf{riferito a} \underline{\textit{servizio}};
    \item \textlangle $ $ per ogni istanza di ProceduraDiCucina $pc$ \textbf{presente in} $m$ \textrangle:
    \begin{itemize}
        \item è stata creata un'istanza di Compito $c$;
        \item $c$.extra = no;
        \item $c$.completato = no;
        \item $c$ \textbf{consiste in} $pc$;
        \item $f$ \textbf{contiene} $c$.
    \end{itemize}
\end{itemize}

\section*{1a.1 apriFoglio(\underline{evento}: Evento, \underline{servizio}: Servizio):}

\paragraph{Pre-condizioni:}

\begin{itemize}
  \item un FoglioRiepilogativo $f$ è \textbf{riferito a} \underline{\textit{servizio}};
  \item $ch$ è \textbf{assegnato a} \underline{\textit{evento}};
\end{itemize}

\paragraph{Post-condizioni:}

\section*{1b.1 ripristinaFoglio(\underline{evento}: Evento, \underline{servizio}: Servizio):}

\paragraph{Pre-condizioni:}

\begin{itemize}
  \item un FoglioRiepilogativo $f$ è \textbf{riferito a} \underline{\textit{servizio}};
  \item $ch$ è \textbf{assegnato a} \underline{\textit{evento}}.
\end{itemize}

\paragraph{Post-condizioni:}

\begin{itemize}
    \item \textlangle $ $ per ogni Compito $c$ \textbf{presente in} $f$ \textrangle:
    \begin{itemize}
        \item l'associazione tra $c$ e $f$ è stata eliminata.
    \end{itemize}
\end{itemize}

\section{Passo 2}

\section*{2. aggiungiProcedura(\underline{proceduraDiCucina}: ProceduraDiCucina):}

\paragraph{Pre-condizioni:}

\begin{itemize}
    \item è in corso la modifica di un FoglioRiepilogativo $f$.
\end{itemize}

\paragraph{Post-condizioni:}

\begin{itemize}
    \item è stata creata un'istanza di Compito $c$;
    \item $c$.extra = sì;
    \item $c$.completato = no;
    \item è stata creata l'associazione \textbf{consiste in} tra $c$ e \underline{\textit{ProceduraDiCucina}};
    \item $f$ \textbf{contiene} $c$.
\end{itemize}

\section*{2a.1 rimuoviProcedura(\underline{proceduraDiCucina}: ProceduraDiCucina):}

\paragraph{Pre-condizioni:}

\begin{itemize}
    \item è in corso la modifica di un FoglioRiepilogativo $f$;
    \item un Compito $c$ \textbf{consiste in} \underline{\textit{ProceduraDiCucina}}.
\end{itemize}

\paragraph{Post-condizioni:}

\begin{itemize}
    \item l'associazione tra $c$ e \underline{\textit{ProceduraDiCucina}} è stata eliminata;
    \item è stata eliminata l'istanza di Compito $c$.
\end{itemize}

\section{Passo 3}

\section*{3. ordinaElenco(\underline{compito}: Compito, \underline{posizione}: numerico):}

\paragraph{Pre-condizioni:}

\begin{itemize}
    \item è in corso la modifica di un FoglioRiepilogativo $f$.
\end{itemize}

\paragraph{Post-condizioni:}

\begin{itemize}
    \item il Compito $c$ è stato spostato in posizione \underline{\textit{posizione}}.
\end{itemize}

\section{Passo 4}

\section*{4. consultaTabellone():}

\paragraph{Pre-condizioni:} -

\paragraph{Post-condizioni:} -

\nt{consultaTabellone() è un'interrogazione di sistema quindi non ha pre e post condizioni.}

\section{Passo 5}

\section*{5. assegnaCompito(\underline{compito}: Compito, \underline{turno}: Turno, \underline{cuoco?}: Cuoco, \underline{stima?}: numerico, \underline{dosi?}: testo):}

\paragraph{Pre-condizioni:}

\begin{itemize}
    \item è in corso la modifica di un FoglioRiepilogativo $f$;
    \item $f$ \textbf{contiene} \underline{\textit{compito}}.
\end{itemize}

\paragraph{Post-condizioni:} se \underline{\textit{turno}.concluso} == no

\begin{itemize}
    \item \underline{\textit{compito}} è \textbf{svolto in} \underline{\textit{turno}};
    \item $[$ se \underline{\textit{cuoco}} è specificato e \underline{\textit{cuoco}.disponibile == sì}$]$ \underline{\textit{compito}} è \textbf{eseguito da} \underline{\textit{cuoco}};
    \item $[$ se \underline{\textit{stima}} è specificato $]$ \underline{\textit{compito}.tempo} = \underline{\textit{stima}};
    \item $[$ se \underline{\textit{dosi}} è specificato $]$ \underline{\textit{compito}.quantità} = \underline{\textit{dosi}}.
\end{itemize}

\section*{5a.1 modificaCompito(\underline{compito}: Compito, \underline{turno?}: Turno, \underline{cuoco?}: Cuoco, \underline{stima?}: numerico, \underline{dosi?}: testo):}

\paragraph{Pre-condizioni:}

\begin{itemize}
    \item è in corso la modifica di un FoglioRiepilogativo $f$;
    \item $f$ \textbf{contiene} \underline{\textit{compito}}.
\end{itemize}

\paragraph{Post-condizioni:} 

\begin{itemize}
    \item $[$ se \underline{\textit{turno}} è specificato e \underline{\textit{turno}.concluso} == no $]$ \underline{\textit{compito}} è \textbf{svolto in} \underline{\textit{turno}};
    \item $[$ se \underline{\textit{cuoco}} è specificato e \underline{\textit{cuoco}.disponibile} == sì $]$ \underline{\textit{compito}} è \textbf{eseguito da} \underline{\textit{cuoco}};
    \item $[$ se \underline{\textit{stima}} è specificato $]$ \underline{\textit{compito}.tempo} = \underline{\textit{stima}};
    \item $[$ se \underline{\textit{dosi}} è specificato $]$ \underline{\textit{compito}.quantità} = \underline{\textit{dosi}}.
\end{itemize}

\section*{5b.1 eliminaCompito(\underline{compito}: Compito):}

\paragraph{Pre-condizioni:}

\begin{itemize}
    \item è in corso la modifica di un FoglioRiepilogativo $f$;
    \item $f$ \textbf{contiene} \underline{\textit{compito}};
    \item \underline{\textit{compito}} è \textbf{svolto in} un Turno $t$.
\end{itemize}

\paragraph{Post-condizioni:} se $t$.concluso == no

\begin{itemize}
    \item l'associazione \textbf{contiene} tra \underline{\textit{compito}} e $f$ è stata eliminata;
    \item l'associazione \textbf{svolto in} tra \underline{\textit{compito}} e $t$ è stata eliminata;
    \item $[$ se Cuoco $c$ è assegnato a \underline{\textit{compito}} $]$ l'associazione \textbf{eseguito da} tra \underline{\textit{compito}} e $c$ è stata eliminata.
\end{itemize}

\section*{5c.1 specificaPronto(\underline{compito}: Compito):}

\paragraph{Pre-condizioni:}

\begin{itemize}
    \item è in corso la modifica di un FoglioRiepilogativo $f$;
    \item $f$ \textbf{contiene} \underline{\textit{compito}};
\end{itemize}

\paragraph{Post-condizioni:}

\begin{itemize}
    \item \underline{\textit{compito}.completato} = sì.
\end{itemize}

